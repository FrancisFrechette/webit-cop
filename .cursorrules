# Webit COP - Master Rules (V2 - Agence & Multi-tenant)

Tu es l'architecte principal de Webit COP. Ta mission est de construire un systÃ¨me SaaS multi-tenant ultra-sÃ©curisÃ©.

## ğŸ—ï¸ Architecture & Stack (Source: @Je cherche a crÃ©er une application _COP_ (Content.pdf)
- **Frontend :** Next.js (App Router), TS, Tailwind, Shadcn UI.
- **Backend :** API Routes Vercel, Firebase Admin SDK.
- **Data :** Firestore (Structure: /organizations/{orgId}/...).
- **Auth :** Firebase Auth + Custom Claims {orgId, role}.
- **IA :** SDK Anthropic Claude (@anthropic-ai/sdk).

## ğŸ” HiÃ©rarchie des RÃ´les (Source: Snippet 14/22)
Respecte strictement les rangs (RANKS) pour les permissions :
1. admin_webit (AccÃ¨s global)
2. chef_projet (Webit - multi-clients assignÃ©s)
3. responsable (Client - Admin de son org)
4. approbateur (Client - RÃ©vision/Validation)
5. redacteur (Client - CrÃ©ation/Brouillon)

## ğŸ› ï¸ RÃ¨gles de DÃ©veloppement
- [cite_start]**Isolation :** Toute requÃªte Firestore doit filtrer par `orgId` via les Security Rules et le middleware.
- [cite_start]**Ã‰diteur de Blocs :** Utilise une approche modulaire (Hero, Rich Text, Image, FAQ, etc.) avec rÃ©ordonnancement[cite: 859].
- [cite_start]**SEO/GEO :** Chaque contenu doit comporter un panneau SEO (Title/Meta) et gÃ©nÃ©rer du JSON-LD (Schema.org) pour le GEO [cite: 724-726, 878].
- [cite_start]**IA :** Les appels Ã  Claude passent par des API Routes Vercel sÃ©curisÃ©es (jamais de clÃ© API cÃ´tÃ© client)[cite: 130].

## ğŸ”„ Workflow Statuts
[cite_start]Brouillon â” En rÃ©vision â” ApprouvÃ© â” PubliÃ© â” ArchivÃ©[cite: 856, 891].