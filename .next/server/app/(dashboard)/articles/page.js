(()=>{var e={};e.id=6171,e.ids=[6171],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},74026:e=>{"use strict";e.exports=require("string_decoder")},98061:e=>{"use strict";e.exports=require("node:assert")},92761:e=>{"use strict";e.exports=require("node:async_hooks")},72254:e=>{"use strict";e.exports=require("node:buffer")},40027:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},65714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},42725:e=>{"use strict";e.exports=require("node:http2")},87503:e=>{"use strict";e.exports=require("node:net")},38846:e=>{"use strict";e.exports=require("node:perf_hooks")},39630:e=>{"use strict";e.exports=require("node:querystring")},84492:e=>{"use strict";e.exports=require("node:stream")},31764:e=>{"use strict";e.exports=require("node:tls")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},93746:e=>{"use strict";e.exports=require("node:util/types")},24086:e=>{"use strict";e.exports=require("node:worker_threads")},65628:e=>{"use strict";e.exports=require("node:zlib")},37396:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>d,pages:()=>c,routeModule:()=>x,tree:()=>u}),r(44548),r(64095),r(35866),r(11506);var s=r(23191),a=r(88716),i=r(37922),o=r.n(i),l=r(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let u=["",{children:["(dashboard)",{children:["articles",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,44548)),"C:\\Projets - Developpement\\cursor-webit-cop\\app\\(dashboard)\\articles\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,64095)),"C:\\Projets - Developpement\\cursor-webit-cop\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,11506)),"C:\\Projets - Developpement\\cursor-webit-cop\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Projets - Developpement\\cursor-webit-cop\\app\\(dashboard)\\articles\\page.tsx"],d="/(dashboard)/articles/page",p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/articles/page",pathname:"/articles",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},80857:(e,t,r)=>{Promise.resolve().then(r.bind(r,39166))},39166:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(10326),a=r(89660),i=r(35047),o=r(17577),l=r(37002);let n=[{value:"all",label:"Tous"},{value:"draft",label:"Brouillons"},{value:"preview",label:"Preview"},{value:"published",label:"Publi\xe9s"},{value:"archived",label:"Archiv\xe9s"}];function u(){let e=(0,i.useRouter)(),[t,r]=(0,o.useState)([]),[u,c]=(0,o.useState)(!0),[d,p]=(0,o.useState)(null),[x,h]=(0,o.useState)("all"),[m,b]=(0,o.useState)("desc"),[v,g]=(0,o.useState)("");(0,o.useCallback)(async()=>{p(null),c(!0);try{let e=new URLSearchParams;e.set("limit","50"),"all"!==x&&e.set("status",x),e.set("orderBy","publishedAt"),e.set("direction",m),v&&e.set("author",v);let t=await (0,a.g)(),s=await fetch(`/api/orgs/current/articles?${e.toString()}`,{headers:{...t},credentials:"include"});if(401===s.status||403===s.status){p("Vous n’\xeates pas autoris\xe9 \xe0 voir cette liste."),r([]);return}if(!s.ok){p("Erreur au chargement des articles.");return}let i=await s.json();r(i.items??[])}catch{p("Erreur r\xe9seau.")}finally{c(!1)}},[x,m,v]);let f=(0,o.useMemo)(()=>{let e=new Set,r=[];for(let s of t){let t=s.authorId??"";!t||e.has(t)||(e.add(t),r.push({id:t,name:s.authorName??s.authorId??"Auteur"}))}return r},[t]),j=(0,o.useMemo)(()=>t.filter(e=>"published"===e.status).length,[t]),q=(0,o.useCallback)(t=>{e.push(`/articles/${t}/edit`)},[e]),w=(0,o.useCallback)(()=>{b(e=>"desc"===e?"asc":"desc")},[]);return u&&0===t.length?s.jsx("div",{className:"layout-container py-12",children:s.jsx("p",{className:"text-webit-fg-muted",children:"Chargement…"})}):(0,s.jsxs)("div",{className:"layout-container py-8",children:[(0,s.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-semibold text-white",children:"Articles"}),s.jsx("button",{type:"button",className:"btn-primary",onClick:()=>e.push("/articles/new/edit"),children:"Nouvel article"})]}),d&&s.jsx("p",{className:"mb-4 text-webit-accent-rose",children:d}),(0,s.jsxs)("div",{className:"mb-4 flex flex-wrap items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-sm text-webit-fg-muted",children:[t.length," article",1!==t.length?"s":"",j!==t.length&&(0,s.jsxs)(s.Fragment,{children:[" \xb7 ",j," publi\xe9",1!==j?"s":""]})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(e=>s.jsx("button",{type:"button",className:x===e.value?"btn-primary text-sm":"btn-secondary text-sm",onClick:()=>h(e.value),children:e.label},e.value))}),f.length>0&&(0,s.jsxs)("select",{value:v,onChange:e=>g(e.target.value),className:"rounded border border-webit-panel-border bg-slate-800/60 px-3 py-1.5 text-sm text-white focus:border-webit-accent focus:outline-none","aria-label":"Filtrer par auteur",children:[s.jsx("option",{value:"",children:"Tous les auteurs"}),f.map(e=>s.jsx("option",{value:e.id,children:e.name||e.id},e.id))]})]}),s.jsx("div",{className:"panel",children:s.jsx(l.N,{articles:t,onRowClick:q,onDateSortClick:w,dateSortDirection:m})})]})}},44548:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`C:\Projets - Developpement\cursor-webit-cop\app\(dashboard)\articles\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,4471,6484,9404,2393],()=>r(37396));module.exports=s})();